{"pageProps":{"note":{"id":"ejXhjipWcHZkFh8dQkNad","title":"Assane","desc":"","updated":1631858586929,"created":1631858240713,"custom":{},"fname":"project.commons-public.wikidata.assane","type":"note","vault":{"fsPath":"vault"},"contentHash":"7d33dd7481bee953aaa0a70a6d8e1749","links":[],"anchors":{},"children":[],"parent":"FWyOwAt9PiD3jHX3Kb275","data":{}},"body":"<h1 id=\"assane\"><a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#assane\"></a>Assane</h1>\n<p>Batch creation of short url for WD SPARQL queries.</p>\n<p>Thanks to Jo I can  start with this curl command </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> <span class=\"token string\">'https://meta.wikimedia.org/w/api.php'</span> -X POST -H <span class=\"token string\">'User-Agent: PMAs Query shortener'</span> -H <span class=\"token string\">'Accept: application/json, text/javascript, /; q=0.01'</span> -H <span class=\"token string\">'Accept-Language: en-US,en;q=0.5'</span> --compressed -H <span class=\"token string\">'Referer: https://meta.wikimedia.org/wiki/Special:UrlShortener'</span> -H <span class=\"token string\">'Content-Type: application/x-www-form-urlencoded; charset=UTF-8'</span> -H <span class=\"token string\">'X-Requested-With: XMLHttpRequest'</span> -H <span class=\"token string\">'Origin: https://meta.wikimedia.org'</span> -H <span class=\"token string\">'DNT: 1'</span> -H <span class=\"token string\">'Connection: keep-alive'</span> -H <span class=\"token string\">'Sec-Fetch-Dest: empty'</span> -H <span class=\"token string\">'Sec-Fetch-Mode: cors'</span> -H <span class=\"token string\">'Sec-Fetch-Site: same-origin'</span> -H <span class=\"token string\">'TE: trailers'</span> --data-raw <span class=\"token string\">'action=shortenurl&#x26;format=json&#x26;url=https%3A%2F%2Fquery.wikidata.org%2F%23FOU%250A'</span>\n</code></pre>\n<p>I now need to automatise the creation of the commands starting from a list of plants\nAs a supplemental option add a qr code for this</p>\n<p>Le's try an example with the query for Abrus precatorius</p>\n<p><a href=\"https://w.wiki/45ZX\">https://w.wiki/45ZX</a></p>\n<p><a href=\"https://query.wikidata.org/#SELECT%20%3Fchemical_compound%20%3Fchemical_compoundLabel%20%3Fqueried_taxa%20%3Fqueried_taxaLabel%20%3Freference%20%3FreferenceLabel%20WHERE%20%7B%0A%20%20VALUES%20%3Fchemical_classes%20%7B%0A%20%20%20%20wd%3AQ11173%20%23%20chemical%20compound%0A%20%20%20%20wd%3AQ59199015%20%23%20group%20of%20stereoisomers%0A%20%20%7D%0A%20%20%3Fchemical_compound%20wdt%3AP31%20%3Fchemical_classes.%20%23%20We%20select%20instance%20of%20the%20chemical%20classes%20%28chemical%20compound%20or%20group%20of%20stereoisomers%29%0A%20%20VALUES%20%3Fqueried_taxa%20%7B%0A%20%20%20%20wd%3AQ190887%20%23Enter%20the%20Wikidata%20identifier%20of%20your%20taxa%20of%20interest%0A%20%20%20%20%23%20You%20can%20remove%20the%20Qxxxxxxx%20id%20and%20hit%20Ctrl%2Bspace%2C%20thype%20in%20the%20first%20letters%20and%20it%20should%20autocomplete%0A%20%20%7D%0A%20%20%7B%0A%20%20%20%20%3Fchemical_compound%20p%3AP703%20%3Fstmt.%20%23%20We%20select%20chemical%20classes%20having%20the%20found%20in%20taxon%20statement%0A%20%20%20%20%3Fstmt%20ps%3AP703%20%3Fqueried_taxa.%20%23%20and%20the%20restrict%20the%20found%20in%20taxon%20statement%20to%20match%20our%20queried%20taxa%0A%20%20%20%20OPTIONAL%20%7B%0A%20%20%20%20%20%20%3Fstmt%20prov%3AwasDerivedFrom%20%3Fref.%0A%20%20%20%20%20%20%3Fref%20pr%3AP248%20%3Freference.%20%23%20We%20optionally%20return%20the%20reference%20if%20present%20stated%20in%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D\">https://query.wikidata.org/#SELECT%20%3Fchemical_compound%20%3Fchemical_compoundLabel%20%3Fqueried_taxa%20%3Fqueried_taxaLabel%20%3Freference%20%3FreferenceLabel%20WHERE%20%7B%0A%20%20VALUES%20%3Fchemical_classes%20%7B%0A%20%20%20%20wd%3AQ11173%20%23%20chemical%20compound%0A%20%20%20%20wd%3AQ59199015%20%23%20group%20of%20stereoisomers%0A%20%20%7D%0A%20%20%3Fchemical_compound%20wdt%3AP31%20%3Fchemical_classes.%20%23%20We%20select%20instance%20of%20the%20chemical%20classes%20%28chemical%20compound%20or%20group%20of%20stereoisomers%29%0A%20%20VALUES%20%3Fqueried_taxa%20%7B%0A%20%20%20%20wd%3AQ190887%20%23Enter%20the%20Wikidata%20identifier%20of%20your%20taxa%20of%20interest%0A%20%20%20%20%23%20You%20can%20remove%20the%20Qxxxxxxx%20id%20and%20hit%20Ctrl%2Bspace%2C%20thype%20in%20the%20first%20letters%20and%20it%20should%20autocomplete%0A%20%20%7D%0A%20%20%7B%0A%20%20%20%20%3Fchemical_compound%20p%3AP703%20%3Fstmt.%20%23%20We%20select%20chemical%20classes%20having%20the%20found%20in%20taxon%20statement%0A%20%20%20%20%3Fstmt%20ps%3AP703%20%3Fqueried_taxa.%20%23%20and%20the%20restrict%20the%20found%20in%20taxon%20statement%20to%20match%20our%20queried%20taxa%0A%20%20%20%20OPTIONAL%20%7B%0A%20%20%20%20%20%20%3Fstmt%20prov%3AwasDerivedFrom%20%3Fref.%0A%20%20%20%20%20%20%3Fref%20pr%3AP248%20%3Freference.%20%23%20We%20optionally%20return%20the%20reference%20if%20present%20stated%20in%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D</a></p>\n<p>curl '<a href=\"https://meta.wikimedia.org/w/api.php&#x27;\">https://meta.wikimedia.org/w/api.php'</a> -X POST -H 'User-Agent: PMAs Query shortener' -H 'Accept: application/json, text/javascript, /; q=0.01' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: <a href=\"https://meta.wikimedia.org/wiki/Special:UrlShortener&#x27;\">https://meta.wikimedia.org/wiki/Special:UrlShortener'</a> -H 'Content-Type: application/x-www-form-urlencoded; charset=UTF-8' -H 'X-Requested-With: XMLHttpRequest' -H 'Origin: <a href=\"https://meta.wikimedia.org&#x27;\">https://meta.wikimedia.org'</a> -H 'DNT: 1' -H 'Connection: keep-alive' -H 'Sec-Fetch-Dest: empty' -H 'Sec-Fetch-Mode: cors' -H 'Sec-Fetch-Site: same-origin' -H 'TE: trailers' --data-raw 'action=shortenurl&#x26;format=json&#x26;url=<a href=\"https://query.wikidata.org/#SELECT%20%3Fchemical_compound%20%3Fchemical_compoundLabel%20%3Fqueried_taxa%20%3Fqueried_taxaLabel%20%3Freference%20%3FreferenceLabel%20WHERE%20%7B%0A%20%20VALUES%20%3Fchemical_classes%20%7B%0A%20%20%20%20wd%3AQ11173%20%23%20chemical%20compound%0A%20%20%20%20wd%3AQ59199015%20%23%20group%20of%20stereoisomers%0A%20%20%7D%0A%20%20%3Fchemical_compound%20wdt%3AP31%20%3Fchemical_classes.%20%23%20We%20select%20instance%20of%20the%20chemical%20classes%20%28chemical%20compound%20or%20group%20of%20stereoisomers%29%0A%20%20VALUES%20%3Fqueried_taxa%20%7B%0A%20%20%20%20wd%3AQ190887%20%23Enter%20the%20Wikidata%20identifier%20of%20your%20taxa%20of%20interest%0A%20%20%20%20%23%20You%20can%20remove%20the%20Qxxxxxxx%20id%20and%20hit%20Ctrl%2Bspace%2C%20thype%20in%20the%20first%20letters%20and%20it%20should%20autocomplete%0A%20%20%7D%0A%20%20%7B%0A%20%20%20%20%3Fchemical_compound%20p%3AP703%20%3Fstmt.%20%23%20We%20select%20chemical%20classes%20having%20the%20found%20in%20taxon%20statement%0A%20%20%20%20%3Fstmt%20ps%3AP703%20%3Fqueried_taxa.%20%23%20and%20the%20restrict%20the%20found%20in%20taxon%20statement%20to%20match%20our%20queried%20taxa%0A%20%20%20%20OPTIONAL%20%7B%0A%20%20%20%20%20%20%3Fstmt%20prov%3AwasDerivedFrom%20%3Fref.%0A%20%20%20%20%20%20%3Fref%20pr%3AP248%20%3Freference.%20%23%20We%20optionally%20return%20the%20reference%20if%20present%20stated%20in%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D&#x27;\">https://query.wikidata.org/#SELECT%20%3Fchemical_compound%20%3Fchemical_compoundLabel%20%3Fqueried_taxa%20%3Fqueried_taxaLabel%20%3Freference%20%3FreferenceLabel%20WHERE%20%7B%0A%20%20VALUES%20%3Fchemical_classes%20%7B%0A%20%20%20%20wd%3AQ11173%20%23%20chemical%20compound%0A%20%20%20%20wd%3AQ59199015%20%23%20group%20of%20stereoisomers%0A%20%20%7D%0A%20%20%3Fchemical_compound%20wdt%3AP31%20%3Fchemical_classes.%20%23%20We%20select%20instance%20of%20the%20chemical%20classes%20%28chemical%20compound%20or%20group%20of%20stereoisomers%29%0A%20%20VALUES%20%3Fqueried_taxa%20%7B%0A%20%20%20%20wd%3AQ190887%20%23Enter%20the%20Wikidata%20identifier%20of%20your%20taxa%20of%20interest%0A%20%20%20%20%23%20You%20can%20remove%20the%20Qxxxxxxx%20id%20and%20hit%20Ctrl%2Bspace%2C%20thype%20in%20the%20first%20letters%20and%20it%20should%20autocomplete%0A%20%20%7D%0A%20%20%7B%0A%20%20%20%20%3Fchemical_compound%20p%3AP703%20%3Fstmt.%20%23%20We%20select%20chemical%20classes%20having%20the%20found%20in%20taxon%20statement%0A%20%20%20%20%3Fstmt%20ps%3AP703%20%3Fqueried_taxa.%20%23%20and%20the%20restrict%20the%20found%20in%20taxon%20statement%20to%20match%20our%20queried%20taxa%0A%20%20%20%20OPTIONAL%20%7B%0A%20%20%20%20%20%20%3Fstmt%20prov%3AwasDerivedFrom%20%3Fref.%0A%20%20%20%20%20%20%3Fref%20pr%3AP248%20%3Freference.%20%23%20We%20optionally%20return%20the%20reference%20if%20present%20stated%20in%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D'</a></p>\n<p>This doesnt work.</p>\n<p>As Jo said</p>\n<p>Bjonnh: ça marche ça</p>\n<p>Bjonnh: faut juste urlencoder l'url de ta query (donc double encodage!)</p>\n<p>Bjonnh: python fait ça facile</p>\n<p>Bjonnh: et tu mets ça dans le paramètre url</p>\n<p>Bjonnh: tout ça tu peux le faire en python avec requests et urlencode. Left as an exercise for you ;)</p>","noteIndex":{"id":"QvYK9hGbCvPpEfSRYhV8j","title":"Root","desc":"","updated":1630130450048,"created":1630130450048,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"c871f8270cbaf4ba23c0747ae826676a","links":[],"anchors":{"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":7,"column":0,"depth":1}},"children":["ih6vyup3yre4m9woc9ldl7k","vDTgZL9UHWqYtBFdtD3vK","jldFUSJGjDf1mFH8c2yUI","2rvdf4t5qnx5hqjj29bojcc","gvdyfgvq0z08fcfaqzmhtjo","46d1odkovrpdi6g16992phy","hpnaglyhnb48vuiniqecnqf","2cxr093kvrg4jojokwgqrbj","w75krbmkkvla3hwd66hn5bh","vuNYixxqx9AgKihkn4D74","1FrTCjiR1fQPBTJNRsbyy","q0njjp0rqest1n2fdjgq0k6","wj0i9czxvt4v0b674nb8501","59ftsVxFXXM9bB43vfKwK","nmnpsy2e1rwqnqgurogi2u6","wbks8reb6dovqdbjjmvwez1","vuk3y9ndmgvpgr7f5dswagw","vkim7t7ojqauk8w6bd8pqhy","fk70o5t5l3ggq2k8yz3pumr","fl1uqy1u26q0k6ik2woe0pw"],"parent":null,"data":{},"body":"# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top. \n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"vaultSelectionModeOnCreate":"smart","fuzzThreshold":0.2}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.112.0","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/commons-dws-public","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://commons-research.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"COMMONS DWS Public","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Click here to edit this page on Github !","editBranch":"main","editViewMode":"edit","editRepository":"https://github.com/commons-research/commons-dws-public"},"enablePrettyLinks":true,"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root","searchMode":"lookup"}}},"__N_SSG":true}